##############################################################
# .PHONY: ì´ íƒ€ê²Ÿë“¤ì€ ì‹¤ì œ íŒŒì¼ì´ ì•„ë‹ˆë¯€ë¡œ í•­ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤.
.PHONY: help build test clean drive

# help: ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ëª…ë ¹ì–´ë¥¼ ì˜ˆì˜ê²Œ ì¶œë ¥í•©ë‹ˆë‹¤.
help: ## ëª¨ë“  ëª…ë ¹ì–´ì™€ ì„¤ëª…ì„ ë³´ì—¬ì¤˜ìš”!
# http://marmelab.com/blog/2016/02/29/auto-documented-makefile.html
	@grep -E '^[a-zA-Z0-9_%/-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-30s\033[0m %s\n", $$1, $$2}'

# build: 'src' ë””ë ‰í„°ë¦¬ì—ì„œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.
build: ## driver í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•´ìš”!
	$(MAKE) -C src

# test: í…ŒìŠ¤íŠ¸ë¥¼ ëŒ€í™”í˜•ìœ¼ë¡œ ë¹Œë“œ, ì‹¤í–‰, ì •ë¦¬ê¹Œì§€ í•œ ë²ˆì—!
test: ## í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì”© í™•ì¸í•˜ë©´ì„œ ì‹¤í–‰í•´ìš”!
	@echo "--- ğŸ§ª í…ŒìŠ¤íŠ¸ ë¹Œë“œë¥¼ ì‹œì‘í• ê²Œìš”... ---"
	cc -Wall -g -DSENTINEL -Isrc src/rbtree.c test/test-rbtree.c -o ./test/test-rbtree
	@echo "\n--- ğŸ”¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤! ---"
	./test/test-rbtree
	@echo "\n--- ğŸ§¹ í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ì„œ ë’·ì •ë¦¬ ì¤‘... ---"
	rm -f ./test/test-rbtree
	@echo "--- âœ¨ ê¹¨ë—í•˜ê²Œ ì •ë¦¬ ì™„ë£Œ! ---"

# drive: ì½”ë“œë¥¼ ë¹Œë“œí•˜ê³ , ì‹¤í–‰í•œ ë’¤, ìë™ìœ¼ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤.
drive: ## í”„ë¡œê·¸ë¨ì„ ë¹Œë“œ, ì‹¤í–‰, ì •ë¦¬ê¹Œì§€ í•œ ë²ˆì—!
	@echo "--- ğŸš€ í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí• ê²Œìš”... ---"
	$(MAKE) build
	@echo "\n--- â–¶ï¸ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•©ë‹ˆë‹¤! ---"
	./src/driver
	@echo "\n--- ğŸ§¹ ì‹¤í–‰ì´ ëë‚˜ì„œ ë’·ì •ë¦¬ ì¤‘... ---"
	$(MAKE) clean
	@echo "--- âœ¨ ê¹¨ë—í•˜ê²Œ ì •ë¦¬ ì™„ë£Œ! ---"

# clean: ë¹Œë“œ í™˜ê²½ì„ ì •ë¦¬í•©ë‹ˆë‹¤.
clean: ## ë¹Œë“œí•˜ë©´ì„œ ë§Œë“¤ì–´ì§„ íŒŒì¼ë“¤ì„ ì²­ì†Œí•´ìš”!
	$(MAKE) -C src clean
	rm -f ./test/test-rbtree


# .PHONY: help build test

# help:
# # http://marmelab.com/blog/2016/02/29/auto-documented-makefile.html
# 	@grep -E '^[a-zA-Z0-9_%/-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-30s\033[0m %s\n", $$1, $$2}'

# build:
# build: ## Build executables
# 	$(MAKE) -C src

# test:
# test: ## Test rbtree implementation
# 	$(MAKE) -C test test
	
# clean:
# clean: ## Clear build environment
# 	$(MAKE) -C src clean
# 	$(MAKE) -C test clean